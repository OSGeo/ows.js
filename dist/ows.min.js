/*! ows.js 2015-05-13 */
var Ows4js={};Ows4js.version="0.0.1",Ows4js.Ows={},Ows4js.Fes={},Ows4js.NOTIE=!0,Ows4js.Proxy="/cgi-bin/proxy.cgi?url=",Ows4js.Util={},window.ActiveXObject&&(Ows4js.NOTIE=!1),Ows4js.Namespaces={csw:"http://www.opengis.net/cat/csw/2.0.2",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink"},Ows4js.IESelectionNamespaces=function(){var a=[];for(var b in Ows4js.Namespaces)a.push(b+":'"+Ows4js.Namespaces[b]+"'");return a.join(" ")},Ows4js.nsResolver=function(a){return Ows4js.Namespaces[a]||null},Ows4js.getXPathNode=function(a,b){var c=new XPathEvaluator,d=c.evaluate(b,a,Ows4js.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return d.singleNodeValue},Ows4js.getXPathNodeList=function(a,b){var c=new XPathEvaluator,d=c.evaluate(b,a,Ows4js.nsResolver,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);return d},Ows4js.getXPathValue=function(a,b){var c=new XPathEvaluator,d=c.evaluate(b,a,Ows4js.nsResolver,XPathResult.STRING_TYPE,null);return d.stringValue},Ows4js.getXPathValueList=function(a,b){for(var c=[],d=new XPathEvaluator,e=d.evaluate(b,a,Ows4js.nsResolver,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),f=e.iterateNext();f;)c.push(f.value),f=e.iterateNext();return c},Ows4js.getXPathNodeAttributeValue=function(a,b){return a.getAttributeNode(b).value},Ows4js.Ows.ServiceIdentification=function(a){this.title=Ows4js.getXPathValue(a,"ows:Title"),this["abstract"]=Ows4js.getXPathValue(a,"ows:Abstract"),this.keywords=Ows4js.getXPathValueList(a,"ows:Keywords/ows:Keyword"),this.type=Ows4js.getXPathValue(a,"ows:ServiceType"),this.version=Ows4js.getXPathValue(a,"ows:ServiceTypeVersion"),this.fees=Ows4js.getXPathValue(a,"ows:Fees"),this.accessconstraints=Ows4js.getXPathValue(a,"ows:AccessConstraints")},Ows4js.Ows.ServiceProvider=function(a){this.name=Ows4js.getXPathValue(a,"ows:ProviderName"),this.url=Ows4js.getXPathValue(a,"ows:ProviderSite/@xlink:href");var b=Ows4js.getXPathNode(a,"ows:ServiceContact");this.contact={},this.contact.name=Ows4js.getXPathValue(b,"ows:IndividualName"),this.contact.position=Ows4js.getXPathValue(b,"ows:PositionName"),this.contact.role=Ows4js.getXPathValue(b,"/ows:Role");var c=Ows4js.getXPathNode(b,"ows:ContactInfo");this.contact.phone=Ows4js.getXPathValue(c,"ows:Phone/ows:Voice"),this.contact.fax=Ows4js.getXPathValue(c,"ows:Phone/ows:Facsimile"),this.contact.address={};var d=Ows4js.getXPathNode(c,"ows:Address");this.contact.address.delivery=Ows4js.getXPathValue(d,"ows:DeliveryPoint"),this.contact.address.city=Ows4js.getXPathValue(d,"ows:City"),this.contact.address.adminarea=Ows4js.getXPathValue(d,"ows:AdministrativeArea"),this.contact.address.postalcode=Ows4js.getXPathValue(d,"ows:PostalCode"),this.contact.address.country=Ows4js.getXPathValue(d,"ows:Country"),this.contact.address.email=Ows4js.getXPathValue(d,"ows:ElectronicMailAddress"),this.contact.url=Ows4js.getXPathValue(c,"ows:OnlineResource/@xlink:href"),this.contact.hours=Ows4js.getXPathValue(c,"ows:HoursOfService"),this.contact.instructions=Ows4js.getXPathValue(c,"ows:ContactInstructions")},Ows4js.Ows.OperationsMetadata=function(a){var b=null,c=null,d=null,e=null,f=null,g=null;for(this.operations=[],this.parameters=[],this.constraints=[],b=Ows4js.getXPathNodeList(a,"ows:Operation"),d=b.iterateNext();d;){for(f={},f.name=Ows4js.getXPathValue(d,"@name"),f.dcp={http:{}},f.dcp.http.get=Ows4js.getXPathValue(d,"ows:DCP/ows:HTTP/ows:Get/@xlink:href"),f.dcp.http.post=Ows4js.getXPathValue(d,"ows:DCP/ows:HTTP/ows:Post/@xlink:href"),f.parameters=[],c=Ows4js.getXPathNodeList(d,"ows:Parameter"),e=c.iterateNext();e;)g={},g.name=Ows4js.getXPathValue(e,"@name"),g.values=Ows4js.getXPathValueList(e,"ows:Value"),f.parameters.push(g),e=c.iterateNext();for(f.constraints=[],c=Ows4js.getXPathNodeList(d,"ows:Constraint"),e=c.iterateNext();e;)g={},g.name=Ows4js.getXPathValue(e,"@name"),g.values=Ows4js.getXPathValueList(e,"ows:Value"),f.parameters.push(g),e=c.iterateNext();this.operations.push(f),d=b.iterateNext()}for(b=Ows4js.getXPathNodeList(a,"ows:Parameter"),d=b.iterateNext();d;)g={},g.name=Ows4js.getXPathValue(d,"@name"),g.values=Ows4js.getXPathValueList(d,"ows:Value"),this.parameters.push(g),d=b.iterateNext();for(b=Ows4js.getXPathNodeList(a,"ows:Constraint"),d=b.iterateNext();d;)g={},g.name=Ows4js.getXPathValue(d,"@name"),g.values=Ows4js.getXPathValueList(d,"ows:Value"),this.constraints.push(g),d=b.iterateNext()},Ows4js.Fes.FilterCapabilities=function(a){this.spatials={},this.scalars={},this.ids={},this.spatials.geometries=Ows4js.getXPathValueList(a,"ogc:Spatial_Capabilities/ogc:GeometryOperands/ogc:GeometryOperand"),this.spatials.operators=Ows4js.getXPathValueList(a,"//ogc:SpatialOperators/ogc:SpatialOperator/@name"),this.scalars.comparisons=Ows4js.getXPathValueList(a,"//ogc:ComparisonOperators/ogc:ComparisonOperator"),this.scalars.functions=Ows4js.getXPathValueList(a,"//ogc:FunctionNames/ogc:FunctionName")},Ows4js.loadXMLDoc=function(a){var b;try{if(console.debug("no proxy"),b=this.Util.httpGet(a),console.debug("found no proxy"),200!==b.status)throw"HTTP status code "+b.status;return b.responseXML}catch(c){try{if(console.warn(c),console.debug("with proxy"),b=this.Util.httpGet(Ows4js.Proxy+a),console.debug("found with proxy"),200!==b.status)throw"HTTP status code "+b.status;return b.responseXML}catch(d){throw console.error(d),"Unable to load XML from URL"}}},Ows4js.loadXMLString=function(a){var b=null,c=null;return Ows4js.NOTIE?(b=new DOMParser,c=b.parseFromString(a,"application/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)),c},Ows4js.Util.httpGet=function(a){var b;try{try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){b=new XMLHttpRequest}return b.open("GET",a,!1),b.send(null),b}catch(c){throw c}},Ows4js.Util.httpPost=function(a,b,c){var d;try{try{d=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){d=new XMLHttpRequest}return d.open("POST",a,!1),d.setRequestHeader("Accept-Language",b),d.send(c),d}catch(e){throw e}},Ows4js.Util.buildUrl=function(a,b){var c=[];for(var d in b)null!==b[d]&&c.push(d+"="+b[d]);return a+"?"+c.join("&")},Ows4js.Filter={},Ows4js.Filter=function(){this["ogc:Filter"]={TYPE_NAME:"Filter_1_1_0.FilterType"}},Ows4js.Filter.prototype.PropertyName=function(a){return this.tmp={},this.tmp.PropertyName=a,this},Ows4js.Filter.prototype.isLike=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsLike":{TYPE_NAME:"Filter_1_1_0.PropertyIsLikeType",escapeChar:"",singleChar:"_",wildCard:"%",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isNull=function(){throw"Not Implemented yet"},Ows4js.Filter.prototype.isBetween=function(a,b){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsBetween":{TYPE_NAME:"Filter_1_1_0.PropertyIsBetweenType",expression:{"ogc:PropertyName":{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}},lowerBoundary:{"ogc:Literal":{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]}},upperBoundary:{"ogc:Literal":{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[b]}}}},delete this.tmp,this},Ows4js.Filter.prototype.isEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isLessThanOrEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsLessThanOrEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsLessThanOrEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isGreaterThan=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsGreaterThan":{TYPE_NAME:"Filter_1_1_0.PropertyIsGreaterThan",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isLessThan=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsLessThan":{TYPE_NAME:"Filter_1_1_0.PropertyIsLessThan",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isGreaterThanOrEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsGreaterThanOrEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsGreaterThanOrEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isNotEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsNotEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsNotEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.and=function(a){if("undefined"==typeof this["ogc:Filter"].logicOps)if(this["ogc:Filter"].logicOps={"ogc:And":{TYPE_NAME:"Filter_1_1_0.BinaryLogicOpType",comparisonOpsOrSpatialOpsOrLogicOps:[]}},"undefined"!=typeof this["ogc:Filter"].comparisonOps)this["ogc:Filter"].logicOps["ogc:And"].comparisonOpsOrSpatialOpsOrLogicOps=[this["ogc:Filter"].comparisonOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].comparisonOps;else{if("undefined"==typeof this["ogc:Filter"].spatialOps)throw"Not Implemented yet, another operators";this["ogc:Filter"].logicOps["ogc:And"].comparisonOpsOrSpatialOpsOrLogicOps=[this["ogc:Filter"].spatialOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].spatialOps}else this["ogc:Filter"].logicOps["ogc:And"].comparisonOpsOrSpatialOpsOrLogicOps=this["ogc:Filter"].logicOps["ogc:And"].comparisonOpsOrSpatialOpsOrLogicOps.concat(Ows4js.Filter.getPreviousOperator(a));return this},Ows4js.Filter.prototype.or=function(a){if("undefined"==typeof this["ogc:Filter"].logicOps)if(this["ogc:Filter"].logicOps={"ogc:Or":{TYPE_NAME:"Filter_1_1_0.BinaryLogicOpType",comparisonOpsOrSpatialOpsOrLogicOps:[]}},"undefined"!=typeof this["ogc:Filter"].comparisonOps)this["ogc:Filter"].logicOps["ogc:Or"].comparisonOpsOrSpatialOpsOrLogicOps=[this["ogc:Filter"].comparisonOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].comparisonOps;else{if("undefined"==typeof this["ogc:Filter"].spatialOps)throw"Not Implemented yet, another operators";this["ogc:Filter"].logicOps["ogc:Or"].comparisonOpsOrSpatialOpsOrLogicOps=[this["ogc:Filter"].spatialOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].spatialOps}else this["ogc:Filter"].logicOps["ogc:Or"].comparisonOpsOrSpatialOpsOrLogicOps=this["ogc:Filter"].logicOps["ogc:Or"].comparisonOpsOrSpatialOpsOrLogicOps.concat(Ows4js.Filter.getPreviousOperator(a));return this},Ows4js.Filter.prototype.not=function(){throw"Not Implemented yet"},Ows4js.Filter.getPreviousOperator=function(a){var b;if("undefined"!=typeof a["ogc:Filter"].comparisonOps)b=a["ogc:Filter"].comparisonOps;else if("undefined"!=typeof a["ogc:Filter"].spatialOps)b=a["ogc:Filter"].spatialOps;else{if("undefined"==typeof a["ogc:Filter"].logicOps)throw console.error(a),"Not Implemented yet, another operators";b=a["ogc:Filter"].logicOps}return b},Ows4js.Filter.prototype.BBOX=function(a,b,c,d,e){return this["ogc:Filter"].spatialOps={"ogc:BBOX":{TYPE_NAME:"Filter_1_1_0.BBOXType",envelope:{"gml:Envelope":{TYPE_NAME:"GML_3_1_1.EnvelopeType",lowerCorner:{TYPE_NAME:"GML_3_1_1.DirectPositionType",value:[a,b]},upperCorner:{TYPE_NAME:"GML_3_1_1.DirectPositionType",value:[c,d]},srsName:e}},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:"ows:BoundingBox"}}},this},Ows4js.Filter.JsonixContext=new Jsonix.Context([OWS_1_0_0,DC_1_1,DCT,XLink_1_0,SMIL_2_0,SMIL_2_0_Language,GML_3_1_1,Filter_1_1_0,CSW_2_0_2],{namespacePrefixes:{"http://www.opengis.net/cat/csw/2.0.2":"csw","http://www.opengis.net/ogc":"ogc","http://www.opengis.net/gml":"gml"},mappingStyle:"simplified"}),Ows4js.Filter.prototype.getXML=function(){var a,b=Ows4js.Filter.JsonixContext.createMarshaller();return a=b.marshalDocument(this)},Ows4js.Csw={},Ows4js.Csw=function(a,b){if(null==b)throw"Missing Configuration! It is a must to CSW to know the profile";Ows4js.Csw.jsonnixContext=new Jsonix.Context(b[0],b[1]),this.url=a,console.log(this.url);var c,d,e=new Ows4js.Csw.GetCapabilities,f=Ows4js.Csw.marshalDocument(e);try{d=Ows4js.Util.httpPost(this.url,"application/xml",f),c=Ows4js.Csw.unmarshalDocument(d.responseXML)}catch(g){d=Ows4js.Util.httpGet(this.url,"application/xml"),c=Ows4js.Csw.unmarshalDocument(d.responseXML)}this.serviceIdentification=c["csw:Capabilities"].serviceIdentification,this.serviceProvider=c["csw:Capabilities"].serviceProvider,this.operationsMetadata=c["csw:Capabilities"].operationsMetadata,this.filterCapabilities=c["csw:Capabilities"].filterCapabilities,console.log(this),this.version="2.0.2"},Ows4js.Csw.prototype.GetRecords=function(a,b,c,d){var e;e=void 0===c||null===c?new Ows4js.Csw.Query("full"):new Ows4js.Csw.Query("full",new Ows4js.Csw.Constraint(c));var f=new Ows4js.Csw.GetRecords(a,b,e,d),g=Ows4js.Csw.marshalDocument(f),h=Ows4js.Util.httpPost(this.url,"application/xml",g);return Ows4js.Csw.unmarshalDocument(h.responseXML)},Ows4js.Csw.marshalDocument=function(a){return Ows4js.Csw.jsonnixContext.createMarshaller().marshalDocument(a)},Ows4js.Csw.unmarshalDocument=function(a){return Ows4js.Csw.jsonnixContext.createUnmarshaller().unmarshalDocument(a)},Ows4js.Csw.unmarshalString=function(a){return Ows4js.Csw.jsonnixContext.createUnmarshaller().unmarshalString(a)},Ows4js.Csw.prototype.GetRecordById=function(a){var b=new Ows4js.Csw.GetRecordById(a),c=Ows4js.Csw.marshalDocument(b),d=Ows4js.Util.httpPost(this.url,"application/xml",c);return Ows4js.Csw.unmarshalDocument(d.responseXML)},Ows4js.Csw.prototype.getOperationByName=function(a){return this.operationsMetadata.operation.filter(function(b){return b.name===a})[0]},Ows4js.Csw.prototype.GetDomain=function(a){var b=new Ows4js.Csw.GetDomain(a),c=Ows4js.Csw.marshalDocument(b),d=Ows4js.Util.httpPost(this.url,"application/xml",c);return Ows4js.Csw.unmarshalDocument(d.responseXML)},Ows4js.Csw.Constraint=function(a){this.TYPE_NAME="CSW_2_0_2.QueryConstraintType",this.version="1.1.0",this.filter=a},Ows4js.Csw.GetRecords=function(a,b,c,d){this["csw:GetRecords"]={TYPE_NAME:"CSW_2_0_2.GetRecordsType",abstractQuery:c,startPosition:a,maxRecords:10,resultType:"results",service:"CSW",version:"2.0.2"},d&&(this["csw:GetRecords"].outputSchema=d),console.log(this)},Ows4js.Csw.GetRecordById=function(a){this["csw:GetRecordById"]={TYPE_NAME:"CSW_2_0_2.GetRecordByIdType",elementSetName:{ObjectTYPE_NAME:"CSW_2_0_2.ElementSetNameType",value:"full"},id:a,service:"CSW",version:"2.0.2"}},Ows4js.Csw.Query=function(a,b){this["csw:Query"]={TYPE_NAME:"CSW_2_0_2.QueryType",elementSetName:{TYPE_NAME:"CSW_2_0_2.ElementSetNameType",value:a},typeNames:[{key:"{http://www.opengis.net/cat/csw/2.0.2}Record",localPart:"Record",namespaceURI:"http://www.opengis.net/cat/csw/2.0.2",prefix:"csw",string:"{http://www.opengis.net/cat/csw/2.0.2}csw:Record"}]},b&&(this["csw:Query"].constraint=b)},Ows4js.Csw.GetDomain=function(a){this["csw:GetDomain"]={TYPE_NAME:"CSW_2_0_2.GetDomainType",propertyName:a,service:"CSW",version:"2.0.2"}},Ows4js.Csw.GetCapabilities=function(){this["csw:GetCapabilities"]={TYPE_NAME:"CSW_2_0_2.GetCapabilitiesType",service:"CSW",acceptVersions:{TYPE_NAME:"OWS_1_0_0.AcceptVersionsType",version:["2.0.2"]},acceptFormats:{TYPE_NAME:"OWS_1_0_0.AcceptFormatsType",outputFormat:["application/xml"]}}};