/*! ows.js 2015-09-08 */
var Ows4js={};Ows4js.version="0.1.2",Ows4js.Ows={},Ows4js.Fes={},Ows4js.Proxy="/cgi-bin/proxy.cgi?url=",Ows4js.Util={},Ows4js.Util.httpGet=function(a){var b;try{try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){b=new XMLHttpRequest}return b.open("GET",a,!1),b.send(null),b}catch(c){throw c}},Ows4js.Util.httpPost=function(a,b,c,d){return new Promise(function(e){var f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&200==f.status&&(console.log(c),e(f.responseXML))},f.open("POST",a,!0),f.setRequestHeader("Accept-Language",b),void 0!=d&&void 0!=d.user&&void 0!=d.pass&&f.setRequestHeader("Authorization","Basic "+btoa(d.user+":"+d.pass)),f.send(c)})},Ows4js.Util.buildUrl=function(a,b){var c=[];for(var d in b)null!==b[d]&&c.push(d+"="+b[d]);return a+"?"+c.join("&")},Ows4js.Filter={},Ows4js.Filter=function(){this["ogc:Filter"]={TYPE_NAME:"Filter_1_1_0.FilterType"}},Ows4js.Filter.prototype.PropertyName=function(a){return this.tmp={},this.tmp.PropertyName=a,this},Ows4js.Filter.prototype.isLike=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsLike":{TYPE_NAME:"Filter_1_1_0.PropertyIsLikeType",escapeChar:"",singleChar:"_",wildCard:"%",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isNull=function(){throw"Not Implemented yet"},Ows4js.Filter.prototype.isBetween=function(a,b){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsBetween":{TYPE_NAME:"Filter_1_1_0.PropertyIsBetweenType",expression:{"ogc:PropertyName":{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}},lowerBoundary:{"ogc:Literal":{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]}},upperBoundary:{"ogc:Literal":{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[b]}}}},delete this.tmp,this},Ows4js.Filter.prototype.isEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isLessThanOrEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsLessThanOrEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsLessThanOrEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isGreaterThan=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsGreaterThan":{TYPE_NAME:"Filter_1_1_0.PropertyIsGreaterThan",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isLessThan=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsLessThan":{TYPE_NAME:"Filter_1_1_0.PropertyIsLessThan",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isGreaterThanOrEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsGreaterThanOrEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsGreaterThanOrEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.isNotEqualTo=function(a){return this["ogc:Filter"].comparisonOps={"ogc:PropertyIsNotEqualTo":{TYPE_NAME:"Filter_1_1_0.PropertyIsNotEqualTo",literal:{TYPE_NAME:"Filter_1_1_0.LiteralType",content:[a]},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:this.tmp.PropertyName}}},delete this.tmp,this},Ows4js.Filter.prototype.and=function(a){if("undefined"==typeof this["ogc:Filter"].logicOps)if(this["ogc:Filter"].logicOps={"ogc:And":{TYPE_NAME:"Filter_1_1_0.BinaryLogicOpType"}},"undefined"!=typeof this["ogc:Filter"].comparisonOps)this["ogc:Filter"].logicOps["ogc:And"].ops=[this["ogc:Filter"].comparisonOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].comparisonOps;else{if("undefined"==typeof this["ogc:Filter"].spatialOps)throw"Not Implemented yet, another operators";this["ogc:Filter"].logicOps["ogc:And"].ops=[this["ogc:Filter"].spatialOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].spatialOps}else this["ogc:Filter"].logicOps["ogc:And"].ops=this["ogc:Filter"].logicOps["ogc:And"].ops.concat(Ows4js.Filter.getPreviousOperator(a));return this},Ows4js.Filter.prototype.or=function(a){if("undefined"==typeof this["ogc:Filter"].logicOps)if(this["ogc:Filter"].logicOps={"ogc:Or":{TYPE_NAME:"Filter_1_1_0.BinaryLogicOpType"}},"undefined"!=typeof this["ogc:Filter"].comparisonOps)this["ogc:Filter"].logicOps["ogc:Or"].ops=[this["ogc:Filter"].comparisonOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].comparisonOps;else{if("undefined"==typeof this["ogc:Filter"].spatialOps)throw"Not Implemented yet, another operators";this["ogc:Filter"].logicOps["ogc:Or"].ops=[this["ogc:Filter"].spatialOps].concat(Ows4js.Filter.getPreviousOperator(a)),delete this["ogc:Filter"].spatialOps}else this["ogc:Filter"].logicOps["ogc:Or"].ops=this["ogc:Filter"].logicOps["ogc:Or"].ops.concat(Ows4js.Filter.getPreviousOperator(a));return this},Ows4js.Filter.prototype.not=function(){throw"Not Implemented yet"},Ows4js.Filter.getPreviousOperator=function(a){var b;if("undefined"!=typeof a["ogc:Filter"].comparisonOps)b=a["ogc:Filter"].comparisonOps;else if("undefined"!=typeof a["ogc:Filter"].spatialOps)b=a["ogc:Filter"].spatialOps;else{if("undefined"==typeof a["ogc:Filter"].logicOps)throw console.error(a),"Not Implemented yet, another operators";b=a["ogc:Filter"].logicOps}return b},Ows4js.Filter.prototype.BBOX=function(a,b,c,d,e){return this["ogc:Filter"].spatialOps={"ogc:BBOX":{TYPE_NAME:"Filter_1_1_0.BBOXType",envelope:{"gml:Envelope":{TYPE_NAME:"GML_3_1_1.EnvelopeType",lowerCorner:{TYPE_NAME:"GML_3_1_1.DirectPositionType",value:[a,b]},upperCorner:{TYPE_NAME:"GML_3_1_1.DirectPositionType",value:[c,d]},srsName:e}},propertyName:{TYPE_NAME:"Filter_1_1_0.PropertyNameType",content:"ows:BoundingBox"}}},this},Ows4js.Filter.JsonixContext=new Jsonix.Context([OWS_1_0_0,DC_1_1,DCT,XLink_1_0,SMIL_2_0,SMIL_2_0_Language,GML_3_1_1,Filter_1_1_0,CSW_2_0_2],{namespacePrefixes:{"http://www.opengis.net/cat/csw/2.0.2":"csw","http://www.opengis.net/ogc":"ogc","http://www.opengis.net/gml":"gml"},mappingStyle:"simplified"}),Ows4js.Filter.prototype.getXML=function(){var a,b=Ows4js.Filter.JsonixContext.createMarshaller();return a=b.marshalDocument(this)},Ows4js.Filter.prototype.getBasicFilterFromXML=function(a){var b=Ows4js.Filter.JsonixContext.createUnmarshaller();return b.unmarshalDocument(a)},Ows4js.Csw={},Ows4js.Csw=function(a,b){if(this.version="2.0.2",null==b)throw"Missing Configuration! It is a must to CSW to know the profile";void 0!=b[2]&&(this.credentials=b[2]),Ows4js.Csw.jsonnixContext=new Jsonix.Context(b[0],b[1]),this.url=a},Ows4js.Csw.prototype.GetCapabilities=function(){var a=new Ows4js.Csw.GetCapabilities,b=Ows4js.Csw.marshalDocument(a),c=this;return Ows4js.Util.httpPost(this.url,"application/xml",b,this.credentials).then(function(a){var b;return b=Ows4js.Csw.unmarshalDocument(a),console.log(b),c.serviceIdentification=b["csw:Capabilities"].serviceIdentification,c.serviceProvider=b["csw:Capabilities"].serviceProvider,c.operationsMetadata=b["csw:Capabilities"].operationsMetadata,c.filterCapabilities=b["csw:Capabilities"].filterCapabilities,c})},Ows4js.Csw.prototype.GetRecords=function(a,b,c,d){var e;e=void 0===c||null===c?new Ows4js.Csw.Query("full"):new Ows4js.Csw.Query("full",new Ows4js.Csw.Constraint(c));var f=new Ows4js.Csw.GetRecords(a,b,e,d),g=Ows4js.Csw.marshalDocument(f);return console.log(f),console.log(g),Ows4js.Util.httpPost(this.url,"application/xml",g,this.credentials).then(function(a){return console.log(a),Ows4js.Csw.unmarshalDocument(a)})},Ows4js.Csw.marshalDocument=function(a){return Ows4js.Csw.jsonnixContext.createMarshaller().marshalDocument(a)},Ows4js.Csw.unmarshalDocument=function(a){return Ows4js.Csw.jsonnixContext.createUnmarshaller().unmarshalDocument(a)},Ows4js.Csw.xmlToObject=function(a){return Ows4js.Csw.unmarshalDocument(a)},Ows4js.Csw.objectToXML=function(a){return Ows4js.Csw.marshalDocument(a)},Ows4js.Csw.unmarshalString=function(a){return Ows4js.Csw.jsonnixContext.createUnmarshaller().unmarshalString(a)},Ows4js.Csw.prototype.GetRecordById=function(a){var b=new Ows4js.Csw.GetRecordById(a),c=Ows4js.Csw.marshalDocument(b);return Ows4js.Util.httpPost(this.url,"application/xml",c,this.credentials).then(function(a){return Ows4js.Csw.unmarshalDocument(a)})},Ows4js.Csw.prototype.getOperationByName=function(a){return this.operationsMetadata.operation.filter(function(b){return b.name===a})[0]},Ows4js.Csw.prototype.GetDomain=function(a){var b=new Ows4js.Csw.GetDomain(a),c=Ows4js.Csw.marshalDocument(b);return Ows4js.Util.httpPost(this.url,"application/xml",c,this.credentials).then(function(a){return Ows4js.Csw.unmarshalDocument(a)})},Ows4js.Csw.prototype.insertRecords=function(a){var b=new Ows4js.Csw.Insert(a),c=new Ows4js.Csw.Transaction(b);console.log(c);var d=Ows4js.Csw.marshalDocument(c);return console.log(d),Ows4js.Util.httpPost(this.url,"application/xml",d,this.credentials).then(function(a){return Ows4js.Csw.unmarshalDocument(a)})},Ows4js.Csw.prototype.updateRecord=function(a){var b=new Ows4js.Csw.Update(a),c=new Ows4js.Csw.Transaction(b);console.log(c);var d=Ows4js.Csw.marshalDocument(c);return console.log(d),Ows4js.Util.httpPost(this.url,"application/xml",d,this.credentials).then(function(a){return Ows4js.Csw.unmarshalDocument(a)})},Ows4js.Csw.prototype.deleteRecords=function(a){var b=new Ows4js.Csw.Delete(a),c=new Ows4js.Csw.Transaction(b),d=Ows4js.Csw.marshalDocument(c);return console.log(d),Ows4js.Util.httpPost(this.url,"application/xml",d,this.credentials).then(function(a){return Ows4js.Csw.unmarshalDocument(a)})},Ows4js.Csw.Constraint=function(a){this.TYPE_NAME="CSW_2_0_2.QueryConstraintType",this.version="1.1.0",this.filter=a},Ows4js.Csw.GetRecords=function(a,b,c,d){this["csw:GetRecords"]={TYPE_NAME:"CSW_2_0_2.GetRecordsType",abstractQuery:c,startPosition:a,maxRecords:b,resultType:"results",service:"CSW",version:"2.0.2"},d&&(this["csw:GetRecords"].outputSchema=d),console.log(this)},Ows4js.Csw.GetRecordById=function(a){this["csw:GetRecordById"]={TYPE_NAME:"CSW_2_0_2.GetRecordByIdType",elementSetName:{ObjectTYPE_NAME:"CSW_2_0_2.ElementSetNameType",value:"full"},id:a,service:"CSW",version:"2.0.2"}},Ows4js.Csw.Query=function(a,b){this["csw:Query"]={TYPE_NAME:"CSW_2_0_2.QueryType",elementSetName:{TYPE_NAME:"CSW_2_0_2.ElementSetNameType",value:a},typeNames:[{key:"{http://www.opengis.net/cat/csw/2.0.2}Record",localPart:"Record",namespaceURI:"http://www.opengis.net/cat/csw/2.0.2",prefix:"csw",string:"{http://www.opengis.net/cat/csw/2.0.2}csw:Record"}]},b&&(this["csw:Query"].constraint=b)},Ows4js.Csw.GetDomain=function(a){this["csw:GetDomain"]={TYPE_NAME:"CSW_2_0_2.GetDomainType",propertyName:a,service:"CSW",version:"2.0.2"}},Ows4js.Csw.GetCapabilities=function(){this["csw:GetCapabilities"]={TYPE_NAME:"CSW_2_0_2.GetCapabilitiesType",service:"CSW",acceptVersions:{TYPE_NAME:"OWS_1_0_0.AcceptVersionsType",version:["2.0.2"]},acceptFormats:{TYPE_NAME:"OWS_1_0_0.AcceptFormatsType",outputFormat:["application/xml"]}}},Ows4js.Csw.Transaction=function(a){this["csw:Transaction"]={TYPE_NAME:"CSW_2_0_2.TransactionType",insertOrUpdateOrDelete:[a],service:"CSW",version:"2.0.2"}},Ows4js.Csw.Insert=function(a){this.TYPE_NAME="CSW_2_0_2.InsertType",this.any=a},Ows4js.Csw.Update=function(a){this.TYPE_NAME="CSW_2_0_2.UpdateType",this.any=a},Ows4js.Csw.Delete=function(a){this.TYPE_NAME="CSW_2_0_2.DeleteType",this.constraint={TYPE_NAME:"CSW_2_0_2.QueryConstraintType",filter:a,version:"1.1.0"}};